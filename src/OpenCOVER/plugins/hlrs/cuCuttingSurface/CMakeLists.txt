IF(COVISE_BUILD_ONLY_COVER OR NOT CUDA_FOUND OR NOT COVISE_USE_CUDA)
  #MESSAGE("Skipping OpenCOVER - cuCuttingSurface plugin since CUDA was not found")
  RETURN()
ENDIF()

COVISE_FIND_PACKAGE(CUDPP)
COVISE_FIND_PACKAGE(GLEW)

USING(CUDPP)
USING(GLEW)

INCLUDE_DIRECTORIES(
  $ENV{COVISEDIR}/src/module/hlrs/cuIsoSurfaceUSG
  ${CUDA_INCLUDE_DIRS}
  ${CUDA_SDK_ROOT_DIR}/common/inc
  ${CUDA_SDK_ROOT_DIR}/common/inc/cudpp
)

SET(HEADERS
  cuCuttingSurface.h
)
SET(SOURCES
  cuCuttingSurface.cpp
  ${COVISEDIR}/src/module/hlrs/cuIsoSurfaceUSG/cudaEngine.cu
)

ADD_DEFINITIONS(-DUSE_VBO)
ADD_DEFINITIONS(-DRENDER_STATE)
#ADD_DEFINITIONS(-DLIC)

cover_add_plugin(cuCuttingSurface ${SOURCES} ${COVISE_DO_LIBRARY} ${COVISE_SHM_LIBRARY} ${COVISE_CONFIG_LIBRARY})
#TARGET_LINK_LIBRARIES(cuCuttingSurface coOpenVRUI coDo coCore ${EXTRA_LIBS})

REMOVE_COVISE_COMPILE_FLAGS(cuCuttingSurface "-wd4251")
REMOVE_COVISE_COMPILE_FLAGS(cuCuttingSurface "-wd4335")